# OmegaRace Workspace Configuration

This directory contains the modern OmegaRace project featuring cross-platform BGFX rendering and clean architecture.

## Technology Stack

- **Rendering**: BGFX (Metal/DirectX/Vulkan/OpenGL backends)
- **Window/Input**: SDL2 (cross-platform)
- **Audio**: FMOD (professional audio engine)
- **Build System**: CMake 3.15+
- **Language**: C++17

## Directory Structure

```
OmegaRace/                    # Root project directory
├── src/                      # Source code (organized by functionality)
│   ├── main.cpp             # Application entry point
│   ├── core/                # Core game systems (Game, Timer, Math)
│   ├── entities/            # Game objects and logic (Player, Enemies, etc.)
│   ├── graphics/            # BGFX rendering and visual effects
│   └── audio/               # FMOD audio systems
├── include/                  # Public header files
├── resources/                # Game assets
│   ├── audio/               # Sound effects and music (FMOD banks)
│   ├── shaders/             # BGFX graphics shaders (Metal/HLSL/GLSL/SPIRV)
│   └── macos/               # Platform-specific resources
├── third-party/             # External dependencies
│   ├── fmod/                # FMOD audio engine (included)
│   └── bgfx/                # BGFX rendering (auto-fetched via CMake)
├── build/                   # Build output (generated by CMake)
├── scripts/                 # Build and utility scripts
├── docs/                    # Documentation
├── dist/                    # Distribution packages (DMG, etc.)
└── CMakeLists.txt          # Modern CMake build with BGFX integration
```

## Quick Start

### Prerequisites
```bash
# macOS
brew install cmake sdl2

# Ubuntu/Linux  
sudo apt install cmake libsdl2-dev build-essential

# Windows (with vcpkg)
vcpkg install sdl2:x64-windows
```

### Build & Run
```bash
# Configure and build
mkdir build && cd build
cmake -DCMAKE_BUILD_TYPE=Release ..
cmake --build . -j$(nproc)

# Run the game
./Debug/OmegaRace.app/Contents/MacOS/OmegaRace  # macOS
./OmegaRace                                      # Linux/Windows

# Alternative: Use build scripts
./scripts/build.sh Release                       # Cross-platform
./build_release.sh --dmg                        # macOS DMG
```

### Development
```bash
# Debug build
cmake -DCMAKE_BUILD_TYPE=Debug ..
cmake --build .

# Format code
./scripts/format.sh                             # If available
```

## Migration from Raylib to BGFX

The project has been successfully migrated from Raylib to a modern BGFX-based rendering system:

### Key Changes
- **Rendering Backend**: Raylib → BGFX (cross-platform, high-performance)
- **Window Management**: Raylib → SDL2 (industry standard)
- **Graphics APIs**: Single API → Multi-backend (Metal/DirectX/Vulkan/OpenGL)
- **Platform Support**: macOS-only → Cross-platform (macOS/Windows/Linux)
- **Build System**: Xcode-only → CMake (modern, cross-platform)

### Technical Improvements
- **Performance**: Hardware-accelerated rendering across all platforms
- **Modern Graphics**: Advanced shader support, bloom effects, volumetric rendering  
- **Cross-Platform**: Single codebase runs on macOS, Windows, and Linux
- **Maintainability**: Clean separation between rendering, window management, and game logic
- **Future-Proof**: BGFX supports modern graphics APIs and continues active development

### Legacy Structure
The old nested `Applications/OmegaRace/OmegaRace/src/` structure has been flattened and organized by functionality:

- **Core Systems** → `src/core/` (Game loop, Timer, Math utilities)
- **Game Entities** → `src/entities/` (Player, Enemies, Projectiles, etc.)
- **Graphics & Rendering** → `src/graphics/` (BGFX integration, Effects, HUD)
- **Audio Systems** → `src/audio/` (FMOD integration)
- **Game Assets** → `resources/` (Audio banks, Shaders, Platform resources)
- **Build Scripts** → `scripts/` (Cross-platform build utilities)
- **Dependencies** → `third-party/` (FMOD included, BGFX auto-fetched)

## Benefits

✅ **Cross-Platform Rendering** - BGFX supports Metal, DirectX, Vulkan, and OpenGL
✅ **High Performance** - Hardware-accelerated graphics across all platforms  
✅ **Modern Architecture** - Clean separation of concerns (rendering/window/game logic)
✅ **Professional Graphics** - Advanced effects like bloom, volumetric rendering
✅ **Industry Standards** - SDL2 for windowing, BGFX for rendering, CMake for building
✅ **Future-Proof** - Active development, modern graphics API support
✅ **Cleaner Organization** - Logical separation by functionality
✅ **Cross-Platform Build** - CMake instead of platform-specific projects
✅ **Standard Structure** - Follows modern C++ project conventions
✅ **Easier Navigation** - No more deep nested directories
✅ **Better Maintainability** - Clear separation of concerns

## Graphics Features

### BGFX Rendering Pipeline
- **Multi-Backend**: Automatic selection of best graphics API per platform
- **Volumetric Lines**: Enhanced line rendering with thickness and bloom
- **Particle Effects**: Hardware-accelerated explosion and trail systems
- **Real-time Effects**: Dynamic bloom, glow, and lighting effects
- **High-DPI Support**: Crisp rendering on modern displays
- **Shader Compilation**: Platform-specific shader optimization

### Platform-Specific Backends
- **macOS**: Metal backend for optimal performance and integration
- **Windows**: DirectX 11/12 backend with modern Windows features
- **Linux**: OpenGL/Vulkan backend based on driver capabilities
- **Fallback**: Graceful degradation to compatible graphics APIs

## Development Notes

### BGFX Integration
- **First Build**: Downloads and compiles BGFX (~5-10 minutes)
- **Incremental Builds**: Fast rebuilds after initial setup
- **Shader Tools**: Built automatically for custom shader development
- **Debug Mode**: BGFX validation and profiling available in debug builds

### Dependencies
- **Auto-Fetched**: BGFX, BX, BIMG (via CMake FetchContent)
- **Platform-Managed**: SDL2 (via package managers)
- **Included**: FMOD audio engine (in third-party/)
- **Built-In**: Custom math library, entity system

### Platform Testing
- **macOS**: Tested on macOS 11.0+ with Metal backend
- **Linux**: Tested on Ubuntu 20.04+ with OpenGL/Vulkan
- **Windows**: Tested on Windows 10+ with DirectX 11

## Legacy Support

The old `Applications/` directory structure is preserved for reference during the transition period. The new BGFX-based system is the primary development target going forward.
